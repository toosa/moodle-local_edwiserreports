"use strict";define(["jquery","core/chartjs","local_edwiserreports/defaultconfig","local_edwiserreports/variables","./common","local_edwiserreports/select2"],function(e,r,o,a,s){return{init:function(a){var t=null,l=o.getPanel("#courseprogressblock"),c=o.getPanel("#courseprogressblock","body"),n=c+" #wdm-courseprogress-select",d=c+" .ct-chart",i=c+" .loader",p=!1,u=e(l+" form.download-links");function g(){var l=e(n).val();u.find('input[name="filter"]').val(l),t&&t.destroy(),s.loader.show("#courseprogressblock"),e.ajax({url:o.requestUrl,type:o.requestType,dataType:o.requestDataType,data:{action:"get_courseprogress_graph_data_ajax",secret:M.local_edwiserreports.secret,data:JSON.stringify({courseid:l})}}).done(function(e){!0!==e.error||"invalidsecretkey"!==e.exception.errorcode?p.graph.data=e.data:a("courseprogressblock",e)}).fail(function(e){}).always(function(){var o;o={labels:p.graph.labels,datasets:[{label:p.graph.label,data:p.graph.data,backgroundColor:p.graph.backgroundColor}]},t=new r(p.ctx,{data:o,type:p.graph.type,options:p.graph.options}),e(i).hide(),e(d).fadeIn("slow"),s.loader.hide("#courseprogressblock")})}(p=o.getCourseProgressBlock())&&(g(),e(c+" .singleselect").select2(),e(n).on("change",function(){e(d).hide(),e(i).show(),g()}))}}});
//# sourceMappingURL=block_courseprogress.min.js.map
